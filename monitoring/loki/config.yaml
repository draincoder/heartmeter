auth_enabled: false

server:
  http_listen_port: 3100
  grpc_listen_port: 9095
  log_level: "info"

common:
  path_prefix: "/tmp/loki"
  storage:
    filesystem:
      chunks_directory: "/tmp/loki/chunks"
      rules_directory: "/tmp/loki/rules"

ingester:
  lifecycler:
    ring:
      kvstore:
        store: "inmemory"
      replication_factor: 1
  chunk_idle_period: "5m"
  max_chunk_age: "1h"
  chunk_retain_period: "30s"
  wal:
    enabled: true
    dir: "/tmp/loki/wal"

schema_config:
  configs:
    - from: "2023-01-01"
      store: "boltdb-shipper"
      object_store: "filesystem"
      schema: "v11"
      index:
        prefix: "index_"
        period: "24h"

storage_config:
  boltdb_shipper:
    active_index_directory: "/tmp/loki/index"
    cache_location: "/tmp/loki/cache"
    shared_store: "filesystem"
  filesystem:
    directory: "/tmp/loki/chunks"

compactor:
  working_directory: "/tmp/loki/compactor"
  shared_store: "filesystem"
  retention_enabled: true

limits_config:
  max_cache_freshness_per_query: "10m"
  enforce_metric_name: false
  reject_old_samples: true
  reject_old_samples_max_age: "30m"
  split_queries_by_interval: "15m"
  ingestion_rate_mb: 100
  ingestion_burst_size_mb: 200

chunk_store_config:
  max_look_back_period: "336h"

table_manager:
  retention_deletes_enabled: true
  retention_period: "336h"

querier:
  query_ingesters_within: "2h"
  max_concurrent: 2048

query_range:
  max_retries: 5
  align_queries_with_step: true
  parallelise_shardable_queries: true
  cache_results: true

frontend:
  max_outstanding_per_tenant: 4096
  compress_responses: true
  log_queries_longer_than: "5s"
